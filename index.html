<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bhosale Family Tree</title>
  <style>
    :root{
      --bgA:#07103a;
      --bgB:#0a2b87;
      --ink:#eef4ff;
      --muted:rgba(255,255,255,0.75);
      --card:rgba(10,14,30,0.55);
      --stroke:rgba(255,255,255,0.16);
      --glow:#ffffff;
    }

    html,body{height:100%; margin:0;}
    body{
      overflow:hidden;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      background:
        radial-gradient(1200px 900px at 50% 25%, rgba(255,255,255,0.12), transparent 62%),
        radial-gradient(900px 700px at 25% 55%, rgba(255,255,255,0.07), transparent 58%),
        linear-gradient(180deg, var(--bgB), var(--bgA) 65%);
    }

    header{
      position:fixed; top:0; left:0; right:0; z-index:10;
      padding:12px 14px;
      background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.10));
      border-bottom:1px solid rgba(255,255,255,0.08);
      backdrop-filter: blur(10px);
    }
    .top{
      max-width:1200px; margin:0 auto;
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }
    h1{ margin:0; font-size:clamp(16px,2.4vw,20px); letter-spacing:0.2px;}
    .hint{ font-size:12px; color:var(--muted); opacity:0.9;}
    .spacer{ flex:1; }

    .btn{
      background: rgba(10,14,30,0.55);
      color: var(--ink);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 12px;
      padding: 8px 10px;
      font-size: 13px;
      cursor: pointer;
      user-select:none;
      transition: transform 120ms ease, background 140ms ease, border-color 140ms ease;
    }
    .btn:hover{
      background: rgba(18,24,56,0.65);
      border-color: rgba(255,255,255,0.18);
    }
    .btn:active{ transform: translateY(1px) scale(0.99); }

    .viewport{
      position:absolute;
      inset: 58px 0 0 0;
      overflow:hidden;
      cursor: grab;
    }
    .viewport:active{ cursor: grabbing; }

    /* Stage we pan/zoom */
    .stage{
      position:absolute;
      left:0; top:0;
      transform-origin: 0 0;
      will-change: transform;
    }

    /* SVG tree */
    #treeSvg{
      position:absolute;
      left:0; top:0;
      pointer-events:none;
      filter:
        drop-shadow(0 0 14px rgba(255,255,255,0.26))
        drop-shadow(0 0 34px rgba(255,255,255,0.14));
    }

    /* Nodes */
    .node{
      position:absolute;
      transform: translate(-50%, -50%);
      min-width: 220px;
      max-width: 280px;
      padding: 12px 12px 10px;
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(10,14,30,0.62), rgba(0,0,0,0.22));
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow:
        0 18px 50px rgba(0,0,0,0.45),
        inset 0 1px 0 rgba(255,255,255,0.06);
      backdrop-filter: blur(7px);
      transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
    }
    .node:hover{
      transform: translate(-50%,-50%) scale(1.02);
      border-color: rgba(255,255,255,0.26);
      box-shadow:
        0 22px 70px rgba(0,0,0,0.55),
        0 0 0 4px rgba(255,255,255,0.08);
    }
    .name{
      font-weight: 780;
      letter-spacing:0.2px;
      line-height:1.15;
      margin-bottom: 6px;
    }
    .tag{
      display:inline-block;
      font-size: 11px;
      color: rgba(255,255,255,0.78);
      border: 1px solid rgba(255,255,255,0.16);
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(0,0,0,0.18);
    }
    .sub{
      margin-top: 6px;
      font-size: 12px;
      color: rgba(255,255,255,0.70);
    }

    /* tiny “glow dot” near node */
    .dot{
      position:absolute;
      width:10px; height:10px;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      box-shadow:
        0 0 18px rgba(255,255,255,0.55),
        0 0 40px rgba(255,255,255,0.24);
      transform: translate(-50%,-50%);
      pointer-events:none;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <header>
    <div class="top">
      <h1>Bhosale Family – Glowing Tree</h1>
      <span class="hint">Drag to move • Wheel to zoom • “Fit” to center</span>
      <div class="spacer"></div>
      <button class="btn" id="fitBtn">Fit</button>
      <button class="btn" id="zoomOutBtn">–</button>
      <button class="btn" id="zoomInBtn">+</button>
    </div>
  </header>

  <div class="viewport" id="viewport">
    <div class="stage" id="stage">
      <svg id="treeSvg"></svg>
      <div id="nodesLayer"></div>
    </div>
  </div>

  <script>
    /***********************
     * DATA (edit names here)
     ***********************/
    const data = {
      id: "root",
      name: "Bhahusaheb Bhosale & Vasanti Bhosale",
      tag: "Grandparents",
      children: [
        { id:"anil", name:"Anil Bhosale", tag:"Child", children:[
          { id:"tejaswini", name:"Tejaswini Bhosale", tag:"Grandchild", children:[] },
          { id:"shweta", name:"Shweta Bhosale", tag:"Grandchild", children:[] },
          { id:"atharva", name:"Atharva Bhosale", tag:"Grandchild", children:[] },
        ]},
        { id:"satish", name:"Satish Bhosale", tag:"Child", children:[
          { id:"aryan", name:"Aryan Bhosale", tag:"Grandchild", children:[] },
        ]},
        { id:"manish", name:"Manish Bhosale", tag:"Child", children:[
          { id:"swanandi", name:"Swanandi Bhosale", tag:"Grandchild", children:[] },
        ]},
        { id:"girish", name:"Girish Bhosale", tag:"Child", children:[
          { id:"krish", name:"Krish Bhosale", tag:"Grandchild", children:[] },
          { id:"parth", name:"Parth Bhosale", tag:"Grandchild", children:[] },
        ]},
      ]
    };

    /***********************
     * CANVAS SIZE + PAN/ZOOM
     ***********************/
    const viewport = document.getElementById("viewport");
    const stage = document.getElementById("stage");
    const svg = document.getElementById("treeSvg");
    const nodesLayer = document.getElementById("nodesLayer");

    let view = { x: 60, y: 60, s: 1 };
    function clamp(v,a,b){ return Math.max(a, Math.min(b,v)); }
    function applyTransform(){
      stage.style.transform = `translate(${view.x}px, ${view.y}px) scale(${view.s})`;
    }

    let dragging=false, last={x:0,y:0};
    viewport.addEventListener("pointerdown",(e)=>{
      dragging=true;
      last={x:e.clientX,y:e.clientY};
      viewport.setPointerCapture(e.pointerId);
    });
    viewport.addEventListener("pointermove",(e)=>{
      if(!dragging) return;
      const dx=e.clientX-last.x, dy=e.clientY-last.y;
      last={x:e.clientX,y:e.clientY};
      view.x += dx; view.y += dy;
      applyTransform();
    });
    viewport.addEventListener("pointerup",()=> dragging=false);

    viewport.addEventListener("wheel",(e)=>{
      e.preventDefault();
      const delta = Math.sign(e.deltaY);
      const factor = delta>0 ? 0.92 : 1.08;

      const rect = viewport.getBoundingClientRect();
      const cx = e.clientX - rect.left;
      const cy = e.clientY - rect.top;

      const beforeX = (cx - view.x)/view.s;
      const beforeY = (cy - view.y)/view.s;

      view.s = clamp(view.s * factor, 0.45, 2.2);

      const afterX = beforeX*view.s + view.x;
      const afterY = beforeY*view.s + view.y;

      view.x += (cx - afterX);
      view.y += (cy - afterY);
      applyTransform();
    }, {passive:false});

    document.getElementById("zoomInBtn").addEventListener("click",()=>{
      view.s = clamp(view.s*1.12, 0.45, 2.2);
      applyTransform();
    });
    document.getElementById("zoomOutBtn").addEventListener("click",()=>{
      view.s = clamp(view.s*0.88, 0.45, 2.2);
      applyTransform();
    });
    document.getElementById("fitBtn").addEventListener("click", fit);

    /***********************
     * TREE LAYOUT (actual tree style)
     * - grandparents at trunk center
     * - children = main branches
     * - grandchildren = smaller branches off each main branch
     ***********************/
    // Stage coordinate system (big enough)
    const W = 1600, H = 1200;
    stage.style.width = W + "px";
    stage.style.height = H + "px";

    // Where trunk is anchored
    const trunkBase = { x: W/2, y: H*0.86 };
    const trunkTop  = { x: W/2, y: H*0.30 };

    // main branch fan angles (in radians)
    // left...right spread; tweak these if you want wider/narrower tree
    function fanAngles(n){
      if(n===1) return [0];
      const start = -1.25;  // left
      const end   =  1.25;  // right
      const step = (end-start)/(n-1);
      return Array.from({length:n}, (_,i)=> start + i*step);
    }

    // For each child: end point along a main branch
    function mainBranchEnd(angle, length){
      return {
        x: trunkTop.x + Math.cos(angle)*length,
        y: trunkTop.y - Math.sin(angle)*length*0.35, // bias upward
      };
    }

    // For each grandchild: smaller branch off main branch
    function subBranchEnd(parentStart, parentEnd, idx, total){
      // point along parent branch where sub-branch begins
      const t = 0.58 + (idx/(Math.max(1,total-1)))*0.26; // 0.58..0.84
      const sx = parentStart.x + (parentEnd.x-parentStart.x)*t;
      const sy = parentStart.y + (parentEnd.y-parentStart.y)*t;

      // sub-branch angle (alternate above/below)
      const baseAng = Math.atan2(parentEnd.y-parentStart.y, parentEnd.x-parentStart.x);
      const wobble = (idx%2===0 ? -1 : 1) * (0.55 + 0.12*idx);
      const ang = baseAng + wobble;

      const len = 160 - idx*18; // slight taper
      return {
        start:{x:sx,y:sy},
        end:{
          x: sx + Math.cos(ang)*len,
          y: sy + Math.sin(ang)*len,
        }
      };
    }

    /***********************
     * SVG DRAW HELPERS
     ***********************/
    function svgEl(tag, attrs={}){
      const el = document.createElementNS("http://www.w3.org/2000/svg", tag);
      for(const [k,v] of Object.entries(attrs)) el.setAttribute(k, v);
      return el;
    }

    function curvePath(a,b,bend=120){
      // smooth cubic curve between points
      const mx = (a.x+b.x)/2;
      const my = (a.y+b.y)/2;
      // perpendicular-ish bend
      const dx = b.x-a.x, dy = b.y-a.y;
      const nx = -dy, ny = dx;
      const nlen = Math.max(1, Math.hypot(nx,ny));
      const ox = (nx/nlen)*bend;
      const oy = (ny/nlen)*bend;

      const c1 = { x: (a.x+mx)/2 + ox*0.20, y:(a.y+my)/2 + oy*0.20 };
      const c2 = { x: (mx+b.x)/2 + ox*0.20, y:(my+b.y)/2 + oy*0.20 };
      return `M ${a.x} ${a.y} C ${c1.x} ${c1.y}, ${c2.x} ${c2.y}, ${b.x} ${b.y}`;
    }

    function drawGlowPath(d, w1, o1, w2, o2){
      // thick soft glow
      const p1 = svgEl("path", {
        d, fill:"none", stroke:"white", "stroke-width": String(w1),
        "stroke-linecap":"round", "stroke-linejoin":"round", opacity: String(o1),
        filter:"url(#softGlow)"
      });
      // crisp core
      const p2 = svgEl("path", {
        d, fill:"none", stroke:"white", "stroke-width": String(w2),
        "stroke-linecap":"round", "stroke-linejoin":"round", opacity: String(o2),
        filter:"url(#hardGlow)"
      });
      return [p1,p2];
    }

    /***********************
     * RENDER TREE
     ***********************/
    function render(){
      // SVG setup
      svg.setAttribute("width", W);
      svg.setAttribute("height", H);
      svg.setAttribute("viewBox", `0 0 ${W} ${H}`);
      svg.innerHTML = "";

      const defs = svgEl("defs");
      defs.innerHTML = `
        <filter id="softGlow" x="-40%" y="-40%" width="180%" height="180%">
          <feGaussianBlur stdDeviation="7.5" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <filter id="hardGlow" x="-40%" y="-40%" width="180%" height="180%">
          <feGaussianBlur stdDeviation="2.8" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      `;
      svg.appendChild(defs);

      // Clear nodes
      nodesLayer.innerHTML = "";

      // --- Draw trunk
      const trunkD = curvePath(trunkBase, trunkTop, 0);
      drawGlowPath(trunkD, 22, 0.12, 10, 0.70).forEach(p=>svg.appendChild(p));

      // Root node placed on trunk (near base, like “standing at trunk”)
      const rootPos = { x: trunkBase.x, y: trunkBase.y + 36 };
      addNode(data, rootPos, true);

      // --- Draw main branches for children
      const kids = data.children || [];
      const angles = fanAngles(kids.length);
      const mainLen = 520;

      kids.forEach((child, i)=>{
        const ang = angles[i];
        const end = mainBranchEnd(ang, mainLen);

        const branchStart = { x: trunkTop.x, y: trunkTop.y + 18 };
        const branchEnd = end;

        const bend = 160 * (Math.abs(ang)/1.25);
        const d = curvePath(branchStart, branchEnd, (ang>0? -1:1)*bend);

        // main branch thickness
        drawGlowPath(d, 14, 0.12, 6.5, 0.72).forEach(p=>svg.appendChild(p));

        // child node near end of main branch
        const childPos = { x: branchEnd.x, y: branchEnd.y };
        addNode(child, childPos, false);

        // --- Grandchildren sub-branches
        const gkids = child.children || [];
        gkids.forEach((g, gi)=>{
          const sb = subBranchEnd(branchStart, branchEnd, gi, gkids.length);

          const d2 = curvePath(sb.start, sb.end, (gi%2===0 ? 90 : -90));
          drawGlowPath(d2, 9, 0.10, 4.4, 0.70).forEach(p=>svg.appendChild(p));

          addNode(g, sb.end, false, true);
        });

        // small “spark” at main branch tip
        const spark = svgEl("circle", {
          cx: String(branchEnd.x),
          cy: String(branchEnd.y),
          r: "3.2",
          fill: "white",
          opacity: "0.75",
          filter: "url(#hardGlow)"
        });
        svg.appendChild(spark);
      });

      // Fit on first render
      fit();
    }

    function addNode(person, pos, isRoot=false, isGrandchild=false){
      const el = document.createElement("div");
      el.className = "node";
      el.style.left = pos.x + "px";
      el.style.top  = pos.y + "px";

      const tag = person.tag || (isRoot ? "Grandparents" : (isGrandchild ? "Grandchild" : "Child"));
      const extra = isRoot ? "Trunk" : (isGrandchild ? "Branch tip" : "Branch");

      el.innerHTML = `
        <div class="name">${escapeHtml(person.name)}</div>
        <span class="tag">${escapeHtml(tag)}</span>
        <div class="sub">${extra}</div>
      `;
      nodesLayer.appendChild(el);

      // glow dot near node
      const dot = document.createElement("div");
      dot.className = "dot";
      dot.style.left = pos.x + "px";
      dot.style.top  = pos.y + "px";
      nodesLayer.appendChild(dot);
    }

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[m]));
    }

    /***********************
     * FIT TO VIEW
     ***********************/
    function fit(){
      const vw = viewport.clientWidth;
      const vh = viewport.clientHeight;

      // stage bounds (W,H) are fixed
      const scale = clamp(Math.min(vw/(W+120), vh/(H+120)), 0.45, 1.25);
      view.s = scale;
      view.x = (vw - W*scale)/2;
      view.y = (vh - H*scale)/2;
      applyTransform();
    }

    // Init
    render();
    applyTransform();
    window.addEventListener("resize", ()=>{ /* optional */ });
  </script>
</body>
</html>
